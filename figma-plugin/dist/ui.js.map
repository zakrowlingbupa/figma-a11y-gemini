{
  "version": 3,
  "sources": ["../src/ui.ts"],
  "sourcesContent": ["const proxyInput = document.getElementById('proxy') as HTMLInputElement;\nconst scanBtn = document.getElementById('scan') as HTMLButtonElement;\nconst applyBtn = document.getElementById('apply') as HTMLButtonElement;\nconst clearBtn = document.getElementById('clear') as HTMLButtonElement;\n\nconst issuesDiv = document.getElementById('issues')!;\nconst annDiv = document.getElementById('annotations')!;\n\nlet pendingAnnotations: any[] = [];\n\nfunction renderIssues(items: any[]) {\n  issuesDiv.innerHTML = items.map(it => {\n    const cls = it.severity === 'error' ? 'err' : it.severity === 'warning' ? 'warn' : 'ok';\n    return `<div class=\"msg ${cls}\"><strong>${it.guideline}</strong><br/>${it.summary}</div>`;\n  }).join('') || \"<div class='msg ok'>No deterministic issues found.</div>\";\n}\n\nfunction renderAnnotations(items: any[]) {\n  annDiv.innerHTML = items.map(it => {\n    const cls = it.severity === 'error' ? 'err' : it.severity === 'warning' ? 'warn' : 'ok';\n    return `<div class=\"msg ${cls}\"><strong>${it.guideline}</strong><br/>${it.message}<br/><em>Suggestion:</em> ${it.suggestion || '\u2014'}</div>`;\n  }).join('') || \"<div class='msg'>No model annotations yet.</div>\";\n}\n\nscanBtn.onclick = () => {\n  parent.postMessage({ pluginMessage: { type: 'scan', proxyUrl: proxyInput.value.trim() } }, '*');\n};\n\napplyBtn.onclick = () => {\n  parent.postMessage({ pluginMessage: { type: 'annotate', payload: { annotations: pendingAnnotations } } }, '*');\n};\n\nclearBtn.onclick = () => {\n  parent.postMessage({ pluginMessage: { type: 'clear-annotations' } }, '*');\n};\n\nonmessage = (e: MessageEvent) => {\n  const msg = (e.data as any).pluginMessage;\n  if (!msg) return;\n  if (msg.type === 'scan-result') {\n    renderIssues(msg.detIssues || []);\n    const model = msg.model || {};\n    try {\n      pendingAnnotations = (model.annotations || []).slice(0, 50);\n      renderAnnotations(pendingAnnotations);\n    } catch {\n      pendingAnnotations = [];\n      annDiv.innerHTML = \"<div class='msg err'>Could not parse model output.</div>\";\n    }\n  }\n  if (msg.type === 'annotate-complete') {\n    annDiv.insertAdjacentHTML('afterbegin', `<div class='msg ok'>Added ${msg.count} annotations to canvas.</div>`);\n  }\n  if (msg.type === 'cleared') {\n    annDiv.innerHTML = \"<div class='msg'>Cleared annotations.</div>\";\n    issuesDiv.innerHTML = '';\n    pendingAnnotations = [];\n  }\n  if (msg.type === 'error') {\n    annDiv.insertAdjacentHTML('afterbegin', `<div class='msg err'>${msg.message}</div>`);\n  }\n};\n"],
  "mappings": ";;;AAAA,MAAM,aAAa,SAAS,eAAe,OAAO;AAClD,MAAM,UAAU,SAAS,eAAe,MAAM;AAC9C,MAAM,WAAW,SAAS,eAAe,OAAO;AAChD,MAAM,WAAW,SAAS,eAAe,OAAO;AAEhD,MAAM,YAAY,SAAS,eAAe,QAAQ;AAClD,MAAM,SAAS,SAAS,eAAe,aAAa;AAEpD,MAAI,qBAA4B,CAAC;AAEjC,WAAS,aAAa,OAAc;AAClC,cAAU,YAAY,MAAM,IAAI,QAAM;AACpC,YAAM,MAAM,GAAG,aAAa,UAAU,QAAQ,GAAG,aAAa,YAAY,SAAS;AACnF,aAAO,mBAAmB,GAAG,aAAa,GAAG,SAAS,iBAAiB,GAAG,OAAO;AAAA,IACnF,CAAC,EAAE,KAAK,EAAE,KAAK;AAAA,EACjB;AAEA,WAAS,kBAAkB,OAAc;AACvC,WAAO,YAAY,MAAM,IAAI,QAAM;AACjC,YAAM,MAAM,GAAG,aAAa,UAAU,QAAQ,GAAG,aAAa,YAAY,SAAS;AACnF,aAAO,mBAAmB,GAAG,aAAa,GAAG,SAAS,iBAAiB,GAAG,OAAO,6BAA6B,GAAG,cAAc,QAAG;AAAA,IACpI,CAAC,EAAE,KAAK,EAAE,KAAK;AAAA,EACjB;AAEA,UAAQ,UAAU,MAAM;AACtB,WAAO,YAAY,EAAE,eAAe,EAAE,MAAM,QAAQ,UAAU,WAAW,MAAM,KAAK,EAAE,EAAE,GAAG,GAAG;AAAA,EAChG;AAEA,WAAS,UAAU,MAAM;AACvB,WAAO,YAAY,EAAE,eAAe,EAAE,MAAM,YAAY,SAAS,EAAE,aAAa,mBAAmB,EAAE,EAAE,GAAG,GAAG;AAAA,EAC/G;AAEA,WAAS,UAAU,MAAM;AACvB,WAAO,YAAY,EAAE,eAAe,EAAE,MAAM,oBAAoB,EAAE,GAAG,GAAG;AAAA,EAC1E;AAEA,cAAY,CAAC,MAAoB;AAC/B,UAAM,MAAO,EAAE,KAAa;AAC5B,QAAI,CAAC;AAAK;AACV,QAAI,IAAI,SAAS,eAAe;AAC9B,mBAAa,IAAI,aAAa,CAAC,CAAC;AAChC,YAAM,QAAQ,IAAI,SAAS,CAAC;AAC5B,UAAI;AACF,8BAAsB,MAAM,eAAe,CAAC,GAAG,MAAM,GAAG,EAAE;AAC1D,0BAAkB,kBAAkB;AAAA,MACtC,QAAQ;AACN,6BAAqB,CAAC;AACtB,eAAO,YAAY;AAAA,MACrB;AAAA,IACF;AACA,QAAI,IAAI,SAAS,qBAAqB;AACpC,aAAO,mBAAmB,cAAc,6BAA6B,IAAI,KAAK,+BAA+B;AAAA,IAC/G;AACA,QAAI,IAAI,SAAS,WAAW;AAC1B,aAAO,YAAY;AACnB,gBAAU,YAAY;AACtB,2BAAqB,CAAC;AAAA,IACxB;AACA,QAAI,IAAI,SAAS,SAAS;AACxB,aAAO,mBAAmB,cAAc,wBAAwB,IAAI,OAAO,QAAQ;AAAA,IACrF;AAAA,EACF;",
  "names": []
}
